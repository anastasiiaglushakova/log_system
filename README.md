# Log System ‚Äî –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è + –ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ + –°–µ—Ä–≤–µ—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

## –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–ü—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫—É –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π **—É—Ä–æ–≤–Ω–µ–π –≤–∞–∂–Ω–æ—Å—Ç–∏**, –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –∑–∞–ø–∏—Å–∏ **–≤ —Ñ–∞–π–ª –∏–ª–∏ —Å–æ–∫–µ—Ç**, –∏ –¥–≤–∞ –∫–æ–Ω—Å–æ–ª—å–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:

1. `app` ‚Äî –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –∏—Å–ø–æ–ª—å–∑—É—é—â–µ–µ –ª–æ–≥–≥–µ—Ä.
2. `log_stats` ‚Äî —Å–µ—Ä–≤–µ—Ä —Å–±–æ—Ä–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ª–æ–≥–æ–≤ –ø–æ –¥–∞–Ω–Ω—ã–º –∏–∑ —Å–æ–∫–µ—Ç–∞.

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–±–æ—Ä–∫—É –∫–∞–∫ —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π (`.so`), —Ç–∞–∫ –∏ —Å–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–π (`.a`) –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π.**  
**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω Makefile –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –∏ —Å–±–æ—Ä–∫–∏.**

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
‚îú‚îÄ‚îÄ include/logger/        # –ó–∞–≥–æ–ª–æ–≤–æ—á–Ω—ã–µ —Ñ–∞–π–ª—ã –ª–æ–≥–≥–µ—Ä–∞
‚îú‚îÄ‚îÄ src/                   # –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ª–æ–≥–≥–µ—Ä–∞
‚îú‚îÄ‚îÄ app/                   # –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ–µ)
‚îú‚îÄ‚îÄ stats/                 # –°–µ—Ä–≤–µ—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ log_stats
‚îú‚îÄ‚îÄ tests/                 # –Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã (Google Test)
‚îú‚îÄ‚îÄ CMakeLists.txt         # –ì–ª–∞–≤–Ω—ã–π CMake-—Ñ–∞–π–ª
‚îú‚îÄ‚îÄ Makefile               # –£–ø—Ä–æ—â—ë–Ω–Ω–∞—è —Å–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫
‚îî‚îÄ‚îÄ README.md              # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

---

## –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏

- –î–ª—è —Å–±–æ—Ä–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–≤–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏:
  - `build` ‚Äî –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è (shared) —Å–±–æ—Ä–∫–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
  - `build_static` ‚Äî —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–±–æ—Ä–∫–∞ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `STATIC=ON`

- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:
  - `LOG_FILE` ‚Äî —Ñ–∞–π–ª –¥–ª—è –∑–∞–ø–∏—Å–∏ –ª–æ–≥–æ–≤ (`./build/logs.txt` –∏–ª–∏ `./build_static/logs.txt`)
  - `LOG_LEVEL` ‚Äî —É—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (`info` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

---

### –°–±–æ—Ä–∫–∞

–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è —Å–±–æ—Ä–∫–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é):

```bash
make build
```

–°—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–±–æ—Ä–∫–∞:

```bash
make build STATIC=ON
```

### –ó–∞–ø—É—Å–∫

# –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (app)

**–ó–∞–ø—É—Å–∫ —Å –∑–∞–ø–∏—Å—å—é –ª–æ–≥–æ–≤ –≤ —Ñ–∞–π–ª:**

```bash
make run_app
```

```bash
make run_app STATIC=ON
```

–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ LOG_FILE –∏ LOG_LEVEL –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä:

```bash
make run_app LOG_FILE=./my_logs.txt LOG_LEVEL=warning
```

```bash
make run_app STATIC=ON LOG_FILE=./my_logs.txt LOG_LEVEL=warning
```

**–ö–æ–º–∞–Ω–¥—ã –≤ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–º —Ä–µ–∂–∏–º–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**

–í –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–º —Ä–µ–∂–∏–º–µ app –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–º–∞–Ω–¥—ã:

    change_level <level> ‚Äî –∏–∑–º–µ–Ω–∏—Ç—å —É—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (info, warning, error)

    exit ‚Äî –∑–∞–≤–µ—Ä—à–∏—Ç—å —Ä–∞–±–æ—Ç—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

    <—É—Ä–æ–≤–µ–Ω—å> <—Å–æ–æ–±—â–µ–Ω–∏–µ> ‚Äî –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ —Å —É—Ä–æ–≤–Ω–µ–º (error, warning, info)

    <—Å–æ–æ–±—â–µ–Ω–∏–µ> ‚Äî –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ —Å —Ç–µ–∫—É—â–∏–º —É—Ä–æ–≤–Ω–µ–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

–£—Ä–æ–≤–Ω–∏ –≤–∞–∂–Ω–æ—Å—Ç–∏ –ø–æ —É–±—ã–≤–∞–Ω–∏—é: error > warning > info.

**–ó–∞–ø—É—Å–∫ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏**

–î–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã –ª–æ–≥–∏ –∏–∑ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è app –æ—Ç–ø—Ä–∞–≤–ª—è–ª–∏—Å—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ log_stats, –Ω—É–∂–Ω–æ:

    1. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ (–≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ):

```bash
make run_stats
```

```bash
make run_stats STATIC=ON
```

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:
```bash
./build/bin/log_stats 5000 3 10
```

```bash
./build_static/bin/log_stats 5000 3 10
```

–ì–¥–µ:

    5000 ‚Äî –ø–æ—Ä—Ç –¥–ª—è –ø—Ä–∏—ë–º–∞ –ª–æ–≥–æ–≤ –ø–æ —Å–æ–∫–µ—Ç—É
    3 ‚Äî N: –≤—ã–≤–æ–¥ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∫–∞–∂–¥—ã–µ N —Å–æ–æ–±—â–µ–Ω–∏–π
    10 ‚Äî T: –≤—ã–≤–æ–¥ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–æ—Å–ª–µ T —Å–µ–∫—É–Ω–¥

–î–ª—è —É–∫–∞–∑–∞–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:

```bash
make run_stats PORT=6000 N=5 T=20
```
```bash
make run_stats STATIC=ON PORT=6000 N=5 T=20
```

–ü—Ä–∏ —Å–±–æ—Ä–∫–µ –ø—Ä–æ–µ–∫—Ç–∞ —Ñ–æ—Ä–º–∏—Ä—É—é—Ç—Å—è –¥–≤–µ –ø–∞–ø–∫–∏ ‚Äî build (shared) –∏ build_static (static), –∫–∞–∂–¥–∞—è –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–≤–æ—é –∫–æ–ø–∏—é log_stats. –°–µ—Ä–≤–µ—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Ç–∏–ø–∞ —Å–±–æ—Ä–∫–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø—Ä–∏—ë–º –ª–æ–≥–æ–≤ –æ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π, —Å–æ–±—Ä–∞–Ω–Ω—ã—Ö –∫–∞–∫ —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π, —Ç–∞–∫ –∏ —Å–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–π –≤–µ—Ä—Å–∏–µ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏.

    2. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ app —Å –ª–æ–≥–≥–µ—Ä–æ–º, –æ—Ç–ø—Ä–∞–≤–ª—è—é—â–∏–º –ª–æ–≥–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä –ø–æ TCP-—Å–æ–∫–µ—Ç—É:

```bash
make run_app_stats
```

```bash
make run_app_stats STATIC=ON
```

–ü—Ä–∏ —ç—Ç–æ–º –ª–æ–≥–∏ –±—É–¥—É—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏, –∞ –Ω–µ –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å—Å—è –≤ —Ñ–∞–π–ª.

# –¢–µ—Å—Ç—ã

–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ:

```bash
make run_tests
```

–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ:

```bash
make run_tests STATIC=ON
```

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
    make clean ‚Äî —É–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π —Å–±–æ—Ä–∫–∏ (build –∏ build_static)

    make help ‚Äî —Å–ø—Ä–∞–≤–∫–∞ –ø–æ –¥–æ—Å—Ç—É–ø–Ω—ã–º —Ü–µ–ª—è–º –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º
```


üîß –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

    C++17 (–±–µ–∑ –∏—Å–∫–ª—é—á–µ–Ω–∏–π)

    STL only

    –ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å (std::thread, std::mutex, condition_variable)

    CMake + Makefile

    Google Test –¥–ª—è —é–Ω–∏—Ç-—Ç–µ—Å—Ç–æ–≤ (–±–µ–∑ —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤ –ø–∞–∫–µ—Ç–æ–≤)

    –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å Ubuntu/Debian

–ê–≤—Ç–æ—Ä:
Anastasiia Glushakova

–ü—Ä–æ–µ–∫—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤ —Ä–∞–º–∫–∞—Ö —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è.
–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω—ã –≤—Ä—É—á–Ω—É—é, –≤–∫–ª—é—á–∞—è —Å–æ–∫–µ—Ç–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Å–±–æ—Ä—â–∏–∫ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏.